
Лабораторна робота №6 
====
Тема: Робота з символьними присроями
====
Завдання:
===

- Подивіться відео (не забудьте про лайк і підписатися - нам треба розвивати тему ядра)
- Напишіть своє символьне пристрій з ioctl. Воно повинно робити щось корисне. Наприклад, надавати шареную пам'ять, або генерувати щось, або розраховувати. Наприклад, вважати кількість входжень певного символу або сортувати рядки або вважати інтеграл або ...

Хід роботи:
====

В даній роботі було розрблено сивольний пристрій, який може рахувати кількість відкриваннь його, рахунок може змінюватися в залежності від мода запуска.
Для запуску модуля потрібно спочатку скомпілювати його:
`make KBUILDDIR="<KBuild directory>"`

Запускаємо ядро за допомогою QEMU:
`qemu-system-x86_64 -enable-kvm -m 512M -smp 4 -kernel "<bzImage path>" -initrd "<path BusyBox shell utilits .gz>" \
                    -append "console=ttyS0" -nographic \
                    -drive file=fat:rw:./<path to module>,format=raw,media=disk`
                    
Підготовчі дії:
`mkdir mnt`
`mount -t vfat /dev/sda1 /mnt`

Запуск модуля:
`insmode /mnt/<module_name.ko>`

Вигрузка модуля:
`rmmod <module_name>`

Висновки:
===

В ході виконання лабараторної роботи було завоєна робота з сивольними пристроями. 
```
/ # insmod /mnt/lab6.ko dev_mood=1 
/ # rmmod lab5
/ # cd dev && mknod lab6 c 248 0 && mdev -s
/dev # cat lab6
[    21.122538] cdev_open was call for 1 times
This device was opened 1 times!
```
